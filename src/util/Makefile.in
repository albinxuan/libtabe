#
# Copyright 1999, TaBE Project, All Rights Reserved.
# Copyright 1999, Pai-Hsiang Hsiao, All Rights Reserved.
#
# $Id: Makefile.in,v 1.1 2000/12/09 09:14:30 thhsieh Exp $
#
CC              = @CC@
CFLAGS          = @CFLAGS@
CPPFLAGS        = @CPPFLAGS@
DEFS            = @DEFS@
RANLIB          = @RANLIB@
LN_S            = @LN_S@
LDFLAGS         = -L.. -ltabe @db_library@
INC             = @db_include@ -I..
INSTALL		= @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA    = @INSTALL_DATA@

program_prefix = @program_prefix@
srcdir      = @srcdir@
top_srcdir  = @top_srcdir@
prefix      = $(program_prefix)@prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
ld_shareexe = @ld_shareexe@

#
# libtabe main makefile.
#
RM	=	rm -rf

DUMP	=	tsidump
DUMPSRC	=	tsidump.c
DUMPOBJ	=	tsidump.o

DEL	=	tsidel
DELSRC	=	tsidel.c
DELOBJ	=	tsidel.o

ADD	=	tsiadd
ADDSRC	=	tsiadd.c
ADDOBJ	=	tsiadd.o

TY	=	tsiyindump
TYSRC	=	tsiyindump.c
TYOBJ	=	tsiyindump.o

all: $(DUMP) $(DEL) $(ADD) $(TY)

.c.o:
	$(CC) -c $(CFLAGS) $(INC) $(DEFS) -o $@ $<

$(DUMP): $(DUMPOBJ)
	$(CC) $(CFLAGS) $(ld_shareexe) $(INC) $(DEFS) -o $(DUMP) $(DUMPOBJ) $(LDFLAGS)

$(DEL): $(DELOBJ)
	$(CC) $(CFLAGS) $(ld_shareexe) $(INC) $(DEFS) -o $(DEL) $(DELOBJ) $(LDFLAGS)

$(ADD): $(ADDOBJ)
	$(CC) $(CFLAGS) $(ld_shareexe) $(INC) $(DEFS) -o $(ADD) $(ADDOBJ) $(LDFLAGS)

$(TY): $(TYOBJ)
	$(CC) $(CFLAGS) $(ld_shareexe) $(INC) $(DEFS) -o $(TY) $(TYOBJ) $(LDFLAGS)

.PHONY: install clean distclean
install: $(DUMP) $(DEL) $(ADD) $(TY)
	if [ ! -d $(bindir) ]; then $(INSTALL) -d $(bindir); fi
	$(INSTALL_PROGRAM) $(DUMP) $(bindir)
	$(INSTALL_PROGRAM) $(DEL) $(bindir)
	$(INSTALL_PROGRAM) $(ADD) $(bindir)
	$(INSTALL_PROGRAM) $(TY) $(bindir)

clean:
	$(RM) $(DUMP) $(DUMPOBJ) $(DEL) $(DELOBJ) $(ADD) $(ADDOBJ) \
              $(TY) $(TYOBJ) *~ core
distclean: clean
	$(RM) Makefile .depend
